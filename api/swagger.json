{
	"openapi": "3.0.0",
	"paths": {
		"/chats": {
			"post": {
				"operationId": "ChatsController_createChat",
				"parameters": [
					{
						"name": "x-socket-id",
						"required": true,
						"in": "header",
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateOpenChatDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"$ref": "#/components/schemas/ChatEntity"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			},
			"get": {
				"operationId": "ChatsController_getChats",
				"parameters": [
					{
						"name": "title",
						"required": true,
						"in": "query",
						"description": "Chat name",
						"schema": {
							"type": "string"
						}
					},
					{
						"name": "limit",
						"required": false,
						"in": "query",
						"description": "Limit chat",
						"schema": {
							"type": "number"
						}
					},
					{
						"name": "offset",
						"required": false,
						"in": "query",
						"description": "Offset chat",
						"schema": {
							"type": "number"
						}
					},
					{
						"name": "notFavoriteChatIds",
						"required": false,
						"in": "query",
						"schema": {
							"type": "array",
							"items": {
								"type": "string"
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "array",
													"items": {
														"$ref": "#/components/schemas/ChatEntity"
													}
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			}
		},
		"/chats/{id}": {
			"get": {
				"operationId": "ChatsController_getChat",
				"parameters": [
					{
						"name": "id",
						"required": true,
						"in": "path",
						"schema": {
							"type": "string"
						}
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "array",
													"items": {
														"$ref": "#/components/schemas/ChatEntity"
													}
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			}
		},
		"/chats/join": {
			"post": {
				"operationId": "ChatsController_join",
				"parameters": [
					{
						"name": "x-socket-id",
						"required": true,
						"in": "header",
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/FavoriteChatsDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "array",
													"items": {
														"$ref": "#/components/schemas/ChatEntity"
													}
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			}
		},
		"/chats/leave": {
			"post": {
				"operationId": "ChatsController_leave",
				"parameters": [
					{
						"name": "x-socket-id",
						"required": true,
						"in": "header",
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/LeaveChatsDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "object"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			}
		},
		"/chats/system_chats": {
			"get": {
				"operationId": "ChatsController_getSystemChats",
				"parameters": [],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "array",
													"items": {
														"$ref": "#/components/schemas/ChatEntity"
													}
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Chats"
				]
			}
		},
		"/messages": {
			"post": {
				"operationId": "MessagesController_createMessage",
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateMessageDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"$ref": "#/components/schemas/MessageEntity"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Messages"
				]
			},
			"get": {
				"operationId": "MessagesController_getMessages",
				"parameters": [
					{
						"name": "chatId",
						"required": true,
						"in": "query",
						"description": "Chat id",
						"schema": {
							"type": "string"
						}
					},
					{
						"name": "limit",
						"required": false,
						"in": "query",
						"description": "Limit message",
						"schema": {
							"type": "number"
						}
					},
					{
						"name": "offset",
						"required": false,
						"in": "query",
						"description": "Offset message",
						"schema": {
							"type": "number"
						}
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "array",
													"items": {
														"$ref": "#/components/schemas/MessageEntity"
													}
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Messages"
				]
			}
		},
		"/transcription/{id}": {
			"get": {
				"operationId": "TranscriptionController_getTranscriptionVoice",
				"parameters": [
					{
						"name": "id",
						"required": true,
						"in": "path",
						"schema": {
							"type": "string"
						}
					}
				],
				"responses": {
					"200": {
						"description": ""
					}
				}
			}
		},
		"/dialogues": {
			"post": {
				"operationId": "DialoguesController_createDialogue",
				"parameters": [
					{
						"name": "x-socket-id",
						"required": true,
						"in": "header",
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateDialoguesDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"$ref": "#/components/schemas/ChatEntity"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				},
				"tags": [
					"Dialogues"
				]
			}
		},
		"/keys/publicKey": {
			"get": {
				"operationId": "KeysController_getPublicKey",
				"parameters": [
					{
						"name": "publicKeyHash",
						"required": true,
						"in": "query",
						"schema": {
							"maxLength": 128,
							"type": "string"
						}
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"$ref": "#/components/schemas/PublicKeyDto"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				}
			},
			"post": {
				"operationId": "KeysController_keepPubicKey",
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/KeepPublicKeyDto"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"$ref": "#/components/schemas/PublicKeyDto"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				}
			}
		},
		"/keys/receiveKey/{chatId}": {
			"post": {
				"operationId": "KeysController_receiveKey",
				"parameters": [
					{
						"name": "key",
						"required": true,
						"in": "path",
						"schema": {
							"type": "string"
						}
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"anyOf": [
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": true
												},
												"data": {
													"type": "object"
												}
											},
											"required": [
												"success",
												"data"
											]
										},
										{
											"type": "object",
											"properties": {
												"success": {
													"type": "boolean",
													"example": false
												},
												"data": {
													"type": "string"
												}
											},
											"required": [
												"success",
												"data"
											]
										}
									]
								}
							}
						}
					}
				}
			}
		}
	},
	"info": {
		"title": "passimx",
		"description": "",
		"version": "0.0.1",
		"contact": {},
		"license": {
			"name": "UNLICENSED",
			"url": "https://github.com/ramzini22"
		}
	},
	"tags": [],
	"servers": [
		{
			"url": "http://localhost:6020",
			"description": "development"
		}
	],
	"components": {
		"schemas": {
			"ChatKeyEntity": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"createdAt": {
						"format": "date-time",
						"type": "string"
					},
					"chatId": {
						"type": "string"
					},
					"publicKeyHash": {
						"type": "string"
					},
					"encryptionKey": {
						"type": "string"
					},
					"received": {
						"type": "boolean"
					},
					"chat": {
						"$ref": "#/components/schemas/ChatEntity"
					}
				},
				"required": [
					"id",
					"createdAt",
					"chatId",
					"publicKeyHash",
					"encryptionKey",
					"received",
					"chat"
				]
			},
			"ChatEntity": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"createdAt": {
						"format": "date-time",
						"type": "string"
					},
					"title": {
						"type": "string"
					},
					"countMessages": {
						"type": "number"
					},
					"type": {
						"type": "string"
					},
					"maxUsersOnline": {
						"type": "number"
					},
					"message": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/MessageEntity"
						}
					},
					"keys": {
						"nullable": true,
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/ChatKeyEntity"
						}
					}
				},
				"required": [
					"id",
					"createdAt",
					"title",
					"countMessages",
					"type",
					"maxUsersOnline",
					"keys"
				]
			},
			"FileEntity": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"createdAt": {
						"format": "date-time",
						"type": "string"
					},
					"key": {
						"type": "string"
					},
					"originalName": {
						"type": "string"
					},
					"chatId": {
						"type": "string"
					},
					"size": {
						"type": "number"
					},
					"mimeType": {
						"type": "string"
					},
					"fileType": {
						"type": "string"
					},
					"messageId": {
						"type": "string"
					},
					"metadata": {
						"type": "object"
					},
					"message": {
						"$ref": "#/components/schemas/FileEntity"
					},
					"chat": {
						"$ref": "#/components/schemas/ChatEntity"
					}
				},
				"required": [
					"id",
					"createdAt",
					"key",
					"originalName",
					"chatId",
					"size",
					"mimeType",
					"fileType",
					"messageId",
					"metadata"
				]
			},
			"MessageEntity": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"createdAt": {
						"format": "date-time",
						"type": "string"
					},
					"chatId": {
						"type": "string"
					},
					"number": {
						"type": "number"
					},
					"message": {
						"type": "string"
					},
					"parentMessageId": {
						"type": "string"
					},
					"type": {
						"type": "string"
					},
					"chat": {
						"$ref": "#/components/schemas/ChatEntity"
					},
					"parentMessage": {
						"$ref": "#/components/schemas/MessageEntity"
					},
					"files": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/FileEntity"
						}
					}
				},
				"required": [
					"id",
					"createdAt",
					"chatId",
					"number",
					"message",
					"parentMessageId",
					"type"
				]
			},
			"CreateOpenChatDto": {
				"type": "object",
				"properties": {
					"title": {
						"type": "string",
						"description": "Chat name"
					}
				},
				"required": [
					"title"
				]
			},
			"ChatDto": {
				"type": "object",
				"properties": {
					"chatId": {
						"type": "string",
						"description": "Id chat"
					},
					"lastMessage": {
						"type": "number",
						"description": "Number last message"
					},
					"maxUsersOnline": {
						"type": "number",
						"description": "MaxUsersOnline message"
					}
				},
				"required": [
					"chatId",
					"lastMessage",
					"maxUsersOnline"
				]
			},
			"FavoriteChatsDto": {
				"type": "object",
				"properties": {
					"chats": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/ChatDto"
						}
					}
				},
				"required": [
					"chats"
				]
			},
			"LeaveChatsDto": {
				"type": "object",
				"properties": {
					"chatIds": {
						"type": "array",
						"description": "Id chat",
						"items": {
							"type": "string",
							"format": "uuid"
						}
					}
				},
				"required": [
					"chatIds"
				]
			},
			"Metadata": {
				"type": "object",
				"properties": {
					"duration": {
						"type": "number"
					},
					"loudnessData": {
						"type": "array",
						"items": {
							"type": "string"
						}
					}
				}
			},
			"CreateFileDto": {
				"type": "object",
				"properties": {
					"key": {
						"type": "string"
					},
					"fileType": {
						"type": "string",
						"enum": [
							"is_voice",
							"is_media"
						]
					},
					"size": {
						"type": "number"
					},
					"mimeType": {
						"type": "string"
					},
					"originalName": {
						"type": "string"
					},
					"metadata": {
						"$ref": "#/components/schemas/Metadata"
					}
				},
				"required": [
					"key",
					"fileType",
					"size",
					"mimeType",
					"originalName"
				]
			},
			"CreateMessageDto": {
				"type": "object",
				"properties": {
					"chatId": {
						"type": "string",
						"description": "Chat id"
					},
					"message": {
						"type": "string",
						"description": "Message",
						"minLength": 1,
						"maxLength": 4096
					},
					"parentMessageId": {
						"type": "string",
						"description": "Message id"
					},
					"files": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/CreateFileDto"
						}
					}
				},
				"required": [
					"chatId"
				]
			},
			"DataResponse": {
				"type": "object",
				"properties": {
					"success": {
						"type": "boolean"
					},
					"data": {
						"type": "object"
					}
				},
				"required": [
					"success",
					"data"
				]
			},
			"MessageDto": {
				"type": "object",
				"properties": {
					"to": {
						"type": "string"
					},
					"event": {
						"type": "string",
						"enum": [
							"create_chat",
							"create_dialogue",
							"create_message",
							"join_chat",
							"leave_chat",
							"get_system_chat",
							"transcribe_audio"
						]
					},
					"data": {
						"$ref": "#/components/schemas/DataResponse"
					}
				},
				"required": [
					"to",
					"event",
					"data"
				]
			},
			"CreateDialogueKeyDto": {
				"type": "object",
				"properties": {
					"publicKeyHash": {
						"type": "string",
						"description": "Публичный ключ"
					},
					"encryptionKey": {
						"type": "string",
						"description": "Зашифрованный общий ключ шифрования для чата"
					}
				},
				"required": [
					"publicKeyHash",
					"encryptionKey"
				]
			},
			"CreateDialoguesDto": {
				"type": "object",
				"properties": {
					"keys": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/CreateDialogueKeyDto"
						}
					}
				},
				"required": [
					"keys"
				]
			},
			"PublicKeyDto": {
				"type": "object",
				"properties": {
					"publicKey": {
						"type": "string"
					}
				},
				"required": [
					"publicKey"
				]
			},
			"KeepPublicKeyDto": {
				"type": "object",
				"properties": {
					"publicKey": {
						"type": "string",
						"maxLength": 4096
					}
				},
				"required": [
					"publicKey"
				]
			}
		}
	}
}